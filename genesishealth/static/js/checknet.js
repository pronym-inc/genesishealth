/* 
	checknet plugin for jQuery by Tom Riley
	v1.5 Nov 2012
	http://tomriley.net
	http://3rdwavemedia.com
*/

(function(e){e.fn.checknet=function(t){function n(){if(document.hidden||document.mozHidden||document.webkitHidden||document.msHidden){window.checknet.windowIsActive=false}else{window.checknet.windowIsActive=true}}function r(){if(!e("#netWarn").length){e("body").prepend('<p id="netWarn">'+checknet.config.warnMsg+"</p>");e("#netWarn").fadeIn("fast")}e('input[type="submit"]').attr("disabled","disabled").addClass("tempDisabled")}function i(){if(e("#netWarn").length){e("#netWarn").fadeOut("fast",function(){e(this).remove()})}e(".tempDisabled").removeAttr("disabled").removeClass("tempDisabled")}function s(t){if(window.checknet.windowIsActive){e.ajax({url:t,cache:false,success:function(){window.checknet.conIsActive=true},error:function(){window.checknet.conIsActive=false},complete:function(){if(window.checknet.conIsActive){i()}else{r()}}})}setTimeout(function(){s(window.checknet.config.checkURL)},window.checknet.config.checkInterval)}if(typeof t==="undefined"){var t={}}if(typeof t.checkInterval==="undefined"){t.checkInterval=5e3}if(typeof t.warnMsg==="undefined"){t.warnMsg="No Internet connection detected, disabled features will be re-enabled when a connection is detected. "}if(typeof t.checkURL==="undefined"){t.checkURL=window.location}else if(t.checkURL.indexOf("http")===-1){t.checkURL="http://"+t.checkURL}window.checknet={windowIsActive:true,conIsActive:true,config:t};if(typeof document.hidden!=="undefined"){document.addEventListener("visibilitychange",n)}else if(typeof document.webkitHidden!=="undefined"){document.addEventListener("webkitvisibilitychange",n)}else if(typeof document.mozHidden!=="undefined"){document.addEventListener("mozvisibilitychange",n)}else if(typeof document.msHidden!=="undefined"){document.addEventListener("msvisibilitychange",n)}s(window.checknet.config.checkURL)}})(jQuery)